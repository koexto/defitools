<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>utf8.js test suite</title>
		<link rel="stylesheet" href="../node_modules/qunitjs/qunit/qunit.css">
	</head>
	<body>
		<div id="qunit"></div>
		<!-- <script src="../node_modules/qunitjs/qunit/qunit.js"></script> -->
		<script src="../utf8.js"></script>
		<script type="text/javascript">

			//var decS = hexToUtf8('0x38ed173900000000000000000000000000000000000000000000000053fe069344fd8de600000000000000000000000000000000000000000000000253adbf63a37b50fa00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000fce1d0d85ace3811c121458a852715b2124bc66d000000000000000000000000000000000000000000000000000000006028eab90000000000000000000000000000000000000000000000000000000000000002000000000000000000000000790be81c3ca0e53974be2688cdb954732c9862e1000000000000000000000000e9e7cea3dedca5984780bafc599bd69add087d56');

			//console.log(utf8.decode('\x46\x6F\x6F\x20\xC2\xA9\x20\x62\x61\x72\x20\xF0\x9D\x8C\x86\x20\x62\x61\x7A\x20\xE2\x98\x83\x20\x71\x75\x78'));
			//console.log(utf8.decode(decS));

			console.log(hexToAscii("0x38ed173900000000000000000000000000000000000000000000000053fe069344fd8de600000000000000000000000000000000000000000000000253adbf63a37b50fa00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000fce1d0d85ace3811c121458a852715b2124bc66d000000000000000000000000000000000000000000000000000000006028eab90000000000000000000000000000000000000000000000000000000000000002000000000000000000000000790be81c3ca0e53974be2688cdb954732c9862e1000000000000000000000000e9e7cea3dedca5984780bafc599bd69add087d56"));


			function hexToAscii(hex) {
			    //if (!utils.isHexStrict(hex))
			      //  throw new Error('The parameter must be a valid HEX string.');

			    var str = "";
			    var i = 0, l = hex.length;
			    if (hex.substring(0, 2) === '0x') {
			        i = 2;
			    }
			    for (; i < l; i+=2) {
			        var code = parseInt(hex.substr(i, 2), 16);
			        str += String.fromCharCode(code);
			    }

			    return str;
			};


			function hexToUtf8(hex) {

		    var str = "";
		    var code = 0;
		    hex = hex.replace(/^0x/i,'');

		    // remove 00 padding from either side
		    hex = hex.replace(/^(?:00)*/,'');
		    hex = hex.split("").reverse().join("");
		    hex = hex.replace(/^(?:00)*/,'');
		    hex = hex.split("").reverse().join("");

		    var l = hex.length;

		    for (var i=0; i < l; i+=2) {
		        code = parseInt(hex.substr(i, 2), 16);
		        // if (code !== 0) {
		        str += String.fromCharCode(code);
		        // }
		    }

		    return str;
		};
		</script>
		<!-- <script src="tests.js"></script> -->
	</body>
</html>
